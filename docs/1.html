<!DOCTYPE html>
<html lang="en" xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<meta charset="utf-8" />
	<title>UnCRD Simple Site Example</title>
	<meta name="description" content="" />
	<meta name="author" content="" />
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link href="lib/bootstrap-2.3.1-13px-linkColor/css/bootstrap.min.css" rel="stylesheet" />
	<link href="css/s.css" rel="stylesheet" />
</head>
<body>

<!-- uncrd widget: 'topBar' --><!-- /uncrd -->

<div class="container main-container uncrd-container">
	<div class="row">
		<div class="span2">
			<div style="display:none" data-uncrd="visible:isReady">
				<!-- uncrd if: user -->
					<div>Привет, <span data-uncrd="text:user().name"></span></div>
					<div><a data-uncrd="click:o('uploadPhoto')" href="#">Загрузить фото</a></div>
				<!-- /uncrd -->
				<!-- uncrd ifnot: user -->
					<div data-uncrd="widget:{name:'loginForm',template:'loginFormMenu'}"></div>
				<!-- /uncrd -->
			</div>
		</div>
		<div class="span10">

			<h3>TODO</h3>
			<ul>
				<li>Полноценный оконный менеджер, несколько больших окон - правильный скролл, меняющийся в зависимости от активного окна, двойное затемнение (сильно затемнен контент, немного затемнены не активные окна).</li>
				<li>Управление фотографиями (удаление - редактирование).</li>
				<li>Фотографии только для друзей, проверять доступ, динамическая авторизация (=> появляются фото только для друзей).</li>
				<li>HTML5 загрузчик фото.</li>
				<li>Анимации.</li>
				<li>Новости.</li>
				<li>Лайки и избранное.</li>
			</ul>


			<h3>Виджет Videos</h3>
			<div class="widget-example">
				<ul class="thumbnails">
					<li class="span2">
						<a href="#" class="thumbnail" data-uncrd="click:o({name:'video',id:5264,loading:'over'})"><img src="http://phototag.ru/p409751_5264"></a>
					</li>
				</ul>
			</div>
			<div class="widget-example">
				<div class="row">
					<div class="span8" data-uncrd="widget:{name:'albums',to_id:410141,limit:8,limitStep:4}"></div>
				</div>
			</div>

			<h3>Виджет Albums Or Photos</h3>
			<div class="widget-example">
				<div class="row">
					<div class="span8" data-uncrd="widget:{name:'albums',to_id:10569,limit:8,limitStep:4}"></div>
				</div>
			</div>
			<div class="widget-example">
				<div class="row">
					<div class="span8" data-uncrd="widget:{name:'albums',to_id:410141,limit:8,limitStep:4}"></div>
				</div>
			</div>

			<h3>Фотки просто так</h3>
			<ul class="thumbnails">
				<li><a class="thumbnail uncrd-loading-over" href="#" data-uncrd="click:o({name:'photo',id:366879})"><img src="http://www.phototag.ru/show/10558_366879/clip5"></a></li>
				<li><a class="thumbnail uncrd-loading-over" href="#" data-uncrd="click:o({name:'photo',id:367888})"><img src="http://www.phototag.ru/show/10773_367888/clip5"></a></li>
				<li><a class="thumbnail uncrd-loading-over" href="#" data-uncrd="click:o({name:'photo',id:367525})"><img src="http://www.phototag.ru/show/10773_367525/clip5"></a></li>
				<li><a class="thumbnail uncrd-loading-over" href="#" data-uncrd="click:o({name:'photo',id:374435})"><img src="http://www.phototag.ru/show/57020_374435/clip5"></a></li>
				<li><a class="thumbnail uncrd-loading-over" href="#" data-uncrd="click:o({name:'photo',id:395942})"><img src="http://www.phototag.ru/show/10569_395942/clip5"></a></li>
			</ul>

			<h3>Пример альбома</h3>
			<ul class="thumbnails">
				<li class="span2"><a class="thumbnail" href="#" data-uncrd="click:o({name:'photo',id:376373,loading:'over'})"><img src="http://www.phototag.ru/show/10569_376373/middle"></a></li>
				<li class="span2"><a class="thumbnail" href="#" data-uncrd="click:o({name:'photo',id:376375,loading:'over'})"><img src="http://www.phototag.ru/show/10569_376375/middle"></a></li>
				<li class="span2"><a class="thumbnail" href="#" data-uncrd="click:o({name:'photo',id:376376,loading:'over'})"><img src="http://www.phototag.ru/show/10569_376376/middle"></a></li>
				<li class="span2"><a class="thumbnail" href="#" data-uncrd="click:o({name:'photo',id:376377,loading:'over'})"><img src="http://www.phototag.ru/show/10569_376377/middle"></a></li>
				<li class="span2"><a class="thumbnail" href="#" data-uncrd="click:o({name:'photo',id:376378,loading:'over'})"><img src="http://www.phototag.ru/show/10569_376378/middle"></a></li>
			</ul>

			<h3>Действия с профилями пользователей</h3>
			<table class="table table-bordered">
				<tbody>
					<tr>
						<td>Kasheftin</td>
						<td><a href="#" data-uncrd="click:o({name:'profile',id:10569,loading:'after'})">Профиль</a></td>
						<td><a href="#" data-uncrd="click:o({name:'userlist',to_id:10569,loading:'after'})">Друзья</a></td>
						<td><a href="#" data-uncrd="click:o({name:'albums',to_id:10569,loading:'after'})">Альбомы</a></td>
						<td><a href="#" data-uncrd="click:o({name:'stena',to_id:10569,loading:'after'})">Стена</a></td>
						<td><a href="#" data-uncrd="click:o({name:'messageForm',to_id:10569,loading:'after'})">Отправить сообщение</a></td>
						<td data-uncrd="widget:{name:'manageFriendControl',to_id:10569}"></td>
					</tr>
					<tr>
						<td>Ilja</td>
						<td><a href="#" data-uncrd="click:o({name:'profile',id:10558,loading:'after'})">Профиль</a></td>
						<td><a href="#" data-uncrd="click:o({name:'userlist',to_id:10558,loading:'after'})">Друзья</a></td>
						<td><a href="#" data-uncrd="click:o({name:'albums',to_id:10558,loading:'after'})">Альбомы</a></td>
						<td><a href="#" data-uncrd="click:o({name:'stena',to_id:10558,loading:'after'})">Стена</a></td>
						<td><a href="#" data-uncrd="click:o({name:'messageForm',to_id:10558,loading:'after'})">Отправить сообщение</a></td>
						<td data-uncrd="widget:{name:'manageFriendControl',to_id:10558}"></td>
					</tr>
					<tr>
						<td>LI</td>
						<td><a href="#" data-uncrd="click:o({name:'profile',id:61785,loading:'after'})">Профиль</a></td>
						<td><a href="#" data-uncrd="click:o({name:'userlist',to_id:61785,loading:'after'})">Друзья</a></td>
						<td><a href="#" data-uncrd="click:o({name:'albums',to_id:61785,loading:'after'})">Альбомы</a></td>
						<td><a href="#" data-uncrd="click:o({name:'stena',to_id:61785,loading:'after'})">Стена</a></td>
						<td><a href="#" data-uncrd="click:o({name:'messageForm',to_id:61785,loading:'after'})">Отправить сообщение</a></td>
						<td data-uncrd="widget:{name:'manageFriendControl',to_id:61785}"></td>
					</tr>
				</tbody>
			</table>

			<h3>Основные методы</h3>
			<table class="table table-bordered">
				<tbody>
					<tr><td><strong>data-uncrd="widget..."</strong></td><td>
						Основной атрибут для указания того, что в данный html-элемент должен загрузится виджет. 
						Чтобы в некоторый див загрузить форму для отправки сообщения пользователю #123, нужно написать следующее:
						<pre>&lt;div data-uncrd="widget:{name:'messageForm',to_id:123}"&gt;&lt;/div&gt;</pre>
						Каждый виджет имеет свой набор параметров.
					</td></tr>
					<tr><td><strong>open(options)</strong></td><td>
						Основной метод core. Открывает всплывающее окно, которое является виджетом modalWindow.
						Если в options присутствует свойство name, в контент modalWindow загрузится виджет name.
						Например, <strong>open({name:'about'})</strong> - открывает всплывающее окно, в контент которого грузится виджет about.
						Как использовать в html-разметке: 
						<pre>&lt;a href="#" data-uncrd="open.bind($data,{name:'profile',id:123})"&gt;Юзер #123&lt;/a&gt;</pre>
						Если кроме name нет других свойств, в options вместо {name:'about'} можно передать только само название виджета, пример:
						<pre>&lt;a href="#" data-uncrd="open.bind($data,'about')"&gt;О проекте&lt;/a&gt;</pre>
						Параметры options - это параметры ВНУТРЕННЕГО виджета. Их можно указать в атрибуте data-uncrd="widget:{...}", и тогда ровно тот же самый виджет будет загружен вне окна в контент сайта.
						<br>
						Параметры самого всплывающего окна (а не внутреннего виджета) могут быть указаны в свойстве modalWindow. Например, чтобы всплывающее окно с виджетом about имело заголовок someHeader, нужно написать следующее:
						<pre>&lt;a href="#" data-uncrd="open.bind($data,{name:'about',modalWindow:{header:'someHeader'}})"&gt;О проекте&lt;/a&gt;</pre>
						Следует заметить, что внутренний виджет имеет приоритетный доступ к свойствам своего modalWindow.

					</td></tr>
					<tr><td><strong>o(options)</strong></td><td>
						Сокращение метода open, которое возвращает open.bind(...).
						Как использовать в html-разметке:
						<pre>&lt;a href="#" data-uncrd="o({name:'profile',id:123})"&gt;Юзер #123&lt;/a&gt;</pre>
						или
						<pre>&lt;a href="#" data-uncrd="o('about')"&gt;О проекте&lt;/a&gt;</pre>
					</td></tr>
				</tbody>
			</table>

			<h3>Параметры метода open и o</h3>
			<table class="table table-bordered table-striped">
				<thead><tr><th>name</th><th>type</th><th>isRequired</th><th>canBeObservable</th><th>default</th><th>description</th></tr></thead>
				<tbody>
					<tr>
						<td>name</td>
						<td>string</td>
						<td>true</td>
						<td>true</td>
						<td></td>
						<td>Название внутреннего виджета. Может быть observable. Меняем переменную - виджет в окне автоматически заменяется и успешно грузится (если подходят остальные необходимые для загрузки параметры виджета).</td>
					</tr>
					<tr>
						<td>template</td>
						<td>string</td>
						<td>false</td>
						<td>true</td>
						<td>совпадает с name</td>
						<td>Название шаблона с html-обвязкой, обычно совпадает с name. Если есть несколько вариантов отображения виджетов, указывается, какой именно использовать. Например для формы логина есть обычная форма, есть горизонтальная однострочная, есть узкая без подписей в полям.</td>
					</tr>
					<tr>
						<td>windowName</td>
						<td>string</td>
						<td>false</td>
						<td>false</td>
						<td>default</td>
						<td>Название окна. Может быть открыто только одно окно с данным названием. Открытие нового окна с тем же названием приводит к закрытию всех других с этим названием.</td>
					</tr>
					<tr>
						<td>modalWindow</td>
						<td>hash</td>
						<td>false</td>
						<td>false</td>
						<td>{}</td>
						<td>Параметры виджета modalWindow, в котором грузится внутренний виджет.</td>
					</tr>
					<tr>
						<td>остальные</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td>Все остальные параметры пробрасываются во внутренний виджет.</td>
					</tr>
				</tbody>
			</table>

			<h3>Виджет: Список альбомов</h3>
			<div class="widget-example">
				<div class="row">
					<div class="span8" data-uncrd="widget:{name:'albums',to_id:10558,limit:8,limitStep:4}"></div>
				</div>
			</div>
			<table class="table table-bordered table-striped">
				<thead><tr><th>name</th><th>type</th><th>isRequired</th><th>canBeObservable</th><th>default</th><th>description</th></tr></thead>
				<tbody>
					<tr>
						<td>to_type</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>0</td>
						<td>Тип ресурса. 0 - пользователь, 1 - сообщество</td>
					</tr>
					<tr>
						<td>to_id</td>
						<td>number</td>
						<td>true</td>
						<td>true</td>
						<td></td>
						<td>id пользователя или сообщества</td>
					</tr>
					<tr>
						<td>data</td>
						<td>hash</td>
						<td>false</td>
						<td>true</td>
						<td></td>
						<td>
							Если не указана, то идет запрос за списком альбомов в соответствии с параметрами to_id и to_type. 
							Однако, к примеру на странице профиля, встречаются сразу несколько блоков, каждый из которых требует своей загрузки.
							Поэтому там идет один запрос к профилю, который включает в себя все необходимые данные, и список альбомов тоже. Данные об альбомах передаются в данный виджет в переменной data, и загрузка не происходит.
						</td>
					</tr>
					<tr>
						<td>order</td>
						<td>enum('','desc')</td>
						<td>false</td>
						<td>true</td>
						<td>desc</td>
						<td>Порядок вывода альбомов, 'order by date' или 'order by date desc', по умолчанию desc, т.е. новые альбомы сначала</td>
					</tr>
					<tr>
						<td>unlimited</td>
						<td>bool</td>
						<td>false</td>
						<td>true</td>
						<td>false</td>
						<td>Если true, показываются сразу все альбомы, их можно только все сразу свернуть или развернуть.</td>
					</tr>
					<tr>
						<td>limit</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>3</td>
						<td>Стартовое количество альбомов, которые показываются. Имеет значение если параметр unlimited не указан или равен false.</td>
					</tr>
					<tr>
						<td>limitStep</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>3</td>
						<td>Шаг, на который изменется количество альбомов если нажать на ссылки Показать еще/Свернуть. Имеет значение если параметр unlimited не указан или равен false.</td>
					</tr>
					<tr>
						<td>header</td>
						<td>string</td>
						<td>false</td>
						<td>true</td>
						<td></td>
						<td>Текст в заголовке виджета.</td>
					</tr>
					<tr>
						<td>showHeader</td>
						<td>bool</td>
						<td>false</td>
						<td>true</td>
						<td>true</td>
						<td>Показывать или нет полосу с заголовком виджета и контролами.</td>
					</tr>
					<tr>
						<td>addHeader</td>
						<td>string</td>
						<td>false</td>
						<td>true</td>
						<td>Загрузить фото</td>
						<td>Текст на кнопке, которая открывает форму для закачки новых фото. Кнопка появляется только есть доступ к закачке фото в данные альбомы.</td>
					</tr>
				</tbody>
			</table>

			<h3>Виджет: список комментариев</h3>
			<div class="widget-example">
				<div data-uncrd="widget:{name:'stena',to_id:10569,limit:3,limitStep:3,order:'desc'}"></div>
			</div>

			<table class="table table-bordered table-striped">
				<thead><tr><th>name</th><th>type</th><th>isRequired</th><th>canBeObservable</th><th>default</th><th>description</th></tr></thead>
				<tbody>
					<tr>
						<td>to_type</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>0</td>
						<td>Тип ресурса. 0 - пользователь, 1 - сообщество</td>
					</tr>
					<tr>
						<td>to_id</td>
						<td>number</td>
						<td>true</td>
						<td>true</td>
						<td></td>
						<td>id пользователя или сообщества</td>
					</tr>
					<tr>
						<td>actions</td>
						<td>hash</td>
						<td>false</td>
						<td>true</td>
						<td>{get:"getStena",create:"createStena"}</td>
						<td>Методы, которые отправляются в ajax когда нужно получить список комментариев или добавить новый комментарий. Это может быть стена пользователя, сообщества, список комментариев к фото или к товару.</td>
					</tr>
					<tr>
						<td>data</td>
						<td>hash</td>
						<td>false</td>
						<td>true</td>
						<td></td>
						<td>
							Если не указана, то идет запрос за списком альбомов в соответствии с параметрами to_id и to_type. 
							Однако, к примеру на странице профиля, встречаются сразу несколько блоков, каждый из которых требует своей загрузки.
							Поэтому там идет один запрос к профилю, который включает в себя все необходимые данные, и список альбомов тоже. Данные об альбомах передаются в данный виджет в переменной data, и загрузка не происходит.
						</td>
					</tr>
					<tr>
						<td>order</td>
						<td>enum('','desc')</td>
						<td>false</td>
						<td>true</td>
						<td>desc</td>
						<td>Порядок вывода сообщений, 'order by date' или 'order by date desc', по умолчанию desc, т.е. новые сообщения сначала. Если новые сообщения сначала, форма добавления нового сообщения выводится над списком, если старые сначала - под списком.</td>
					</tr>
					<tr>
						<td>unlimited</td>
						<td>bool</td>
						<td>false</td>
						<td>true</td>
						<td>false</td>
						<td>Если true, показываются сразу все сообщения, их можно только все сразу свернуть или развернуть.</td>
					</tr>
					<tr>
						<td>limit</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>3</td>
						<td>Стартовое количество сообщений, которые показываются (учитываются только корневые, корневое сообщение показывается вместе со всеми своими ответами). Имеет значение если параметр unlimited не указан или равен false.</td>
					</tr>
					<tr>
						<td>limitStep</td>
						<td>number</td>
						<td>false</td>
						<td>true</td>
						<td>3</td>
						<td>Шаг, на который изменется количество сообщений если нажать на ссылки Показать еще/Свернуть. Имеет значение если параметр unlimited не указан или равен false.</td>
					</tr>
					<tr>
						<td>header</td>
						<td>string</td>
						<td>false</td>
						<td>true</td>
						<td></td>
						<td>Текст в заголовке виджета.</td>
					</tr>
					<tr>
						<td>showHeader</td>
						<td>bool</td>
						<td>false</td>
						<td>true</td>
						<td>true</td>
						<td>Показывать или нет полосу с заголовком виджета и контролами.</td>
					</tr>
					<tr>
						<td>addCommentHeader</td>
						<td>string</td>
						<td>false</td>
						<td>true</td>
						<td></td>
						<td>Текст на кнопке, которая открывает форму для отправки нового сообщения.</td>
					</tr>
					<tr>
						<td>to</td>
						<td>id</td>
						<td>false</td>
						<td>true</td>
						<td>null</td>
						<td>id сообщения, на который оставляется ответ. Если null, форма не показывается, если 0 - показывается как новый комментарий, если >0, ищется комментарий и форма показыватся у него.</td>
					</tr>
				</tbody>
			</table>

			<h3>Виджет: cписок друзей</h3>
			<div class="widget-example">
				<div data-uncrd="widget:{name:'userlist',to_id:10569}"></div>
			</div>

			<h3>Виджет: блок комментариев к фото</h3>
			<div class="widget-example">
				<div data-uncrd="widget:{name:'stena',actions:{get:'getPhotoComments',create:'createPhotoComment'},to_id:366879,unlimited:true,showHeader:false,to:0,addCommentHeader:'Ваш комментарий'}"></div>
			</div>

			<h3>Виджет: отправить сообщение пользователю</h3>
			<div class="widget-example">
				<div data-uncrd="widget:{name:'messageForm',to_id:61785,showSubmitButton:true}"></div>
			</div>

			<h3>Виджет: форма логина</h3>
			<div class="widget-example">
				<div class="row">
					<div class="span3" data-uncrd="widget:{name:'loginForm',template:'loginFormMenu'}"></div>
					<div class="span5">
						<div data-uncrd="widget:{name:'loginForm',template:'loginFormInline'}"></div>
						<div data-uncrd="widget:{name:'loginForm',template:'loginFormInline'}"></div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>


<script type="text/javascript"><!--
(function() {
	var RndNum4NoCash = Math.round(Math.random() * 1000000000); RndNum4NoCash = 0;
	var us = document.createElement("script"); us.type = "text/javascript"; us.async = true; us.src = "http://uncrd.ragneta.com/js/main.js?rnd=" + RndNum4NoCash;
	var uc = document.createElement("link"); uc.type = "text/css"; uc.rel = "stylesheet";  uc.href = "http://uncrd.ragneta.com/css/main.css?rnd=" + RndNum4NoCash;
	var s = document.getElementsByTagName("head")[0]; s.appendChild(uc); s.appendChild(us);
})();
//--></script>

</body>
</html>
